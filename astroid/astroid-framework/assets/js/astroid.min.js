var astroidFramework=angular.module("astroid-framework",["ng-sortable","ngAnimate"]);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function generateID(){if(Math.random()>=.5)var e=Math.floor(10*Math.random()+1),t=Math.floor(100*Math.random()+1),o=Math.floor(10*Math.random()+1);else e=Math.floor(10*Math.random()+1),t=Math.floor(10*Math.random()+1),o=Math.floor(100*Math.random()+1);return e+t+o+Date.now().toString()}function refreshID(e,t){switch(t){case"layout":e.sections.forEach(function(e){refreshID(e,"section")});break;case"section":e.id=generateID(),e.rows.forEach(function(e){refreshID(e,"row")});break;case"row":e.id=generateID(),e.cols.forEach(function(e){refreshID(e,"col")});break;case"col":e.id=generateID(),e.elements.forEach(function(e){refreshID(e,"element")});break;case"element":e.id=generateID()}}astroidFramework.directive("tooltip",function(){return{restrict:"A",link:function(e,t,o){$(t).hover(function(){$(t).tooltip("show")},function(){$(t).tooltip("hide")})}}}),astroidFramework.directive("astroidmediagallery",["$http",function(e){return{restrict:"A",scope:!0,require:"ngModel",link:function(e,t,o,i){e.gallery={},e.back="",e.folder="",e.MEDIA_URL=SITE_URL+e.Imgpath+"/",e.iconsize=130,e.getImageUrl=function(){return""==i.$modelValue||void 0===i.$modelValue?(e.clearImage(),""):e.MEDIA_URL+i.$modelValue},e.getFileName=function(){return""==i.$modelValue||void 0===i.$modelValue?(e.clearImage(),""):i.$modelValue},e.getImgUrl=function(t){return e.MEDIA_URL+t},e.clearImage=function(e){i.$setViewValue("");try{Admin.refreshScroll()}catch(e){}},e.selectImage=function(t,o){i.$setViewValue(o),e.selectMedia=!1;try{Admin.refreshScroll()}catch(e){}},e.getLibrary=function(t,o){$("a#"+o).tab("show"),e.loading=!0,e.folder=t,e.bradcrumb=[],$.ajax({method:"GET",url:BASE_URL+"index.php?option=com_ajax&astroid=media&action=library&folder="+t+"&asset=com_templates&author=",success:function(o){if("error"==o.status)return $.notify(o.message,{className:"error",globalPosition:"bottom right"}),e.selectMedia=!1,e.$apply(),!1;e.gallery=o.data,e.loading=!1;var i=t.split("/"),n=[],r=[];n.push({name:"Library",url:""}),i.forEach(function(e,t){r.push(e);var o=r.join("/"),i={name:""==o?"Library":e,url:o};n.push(i)}),e.bradcrumb=n,e.$apply()}})},e.newFolder=function(t){var o=prompt(TPL_ASTROID_NEW_FOLDER_NAME_LBL,"");if(""===o)return!1;if(!o)return!1;if(!/^[0-9a-zA-Z].*/.test(o)||/\s/.test(o))return Admin.notify(TPL_ASTROID_NEW_FOLDER_NAME_INVALID,"error"),!1;e.loading=!0,$.ajax({method:"GET",url:BASE_URL+"index.php?option=com_ajax&astroid=media&action=create-folder&dir="+e.gallery.current_folder+"&name="+o,success:function(o){"error"==o.status?$.notify(o.message,{className:"error",globalPosition:"bottom right"}):($.notify(o.data.message,{className:"success",globalPosition:"bottom right"}),e.getLibrary(o.data.folder,t)),e.loading=!1,e.$apply()}})}}}}]),astroidFramework.directive("astroidsocialprofiles",["$http",function(e){return{restrict:"A",scope:!0,link:function(e,t,o){e.getId=function(e){return e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},AstroidSocialProfiles.forEach(function(t){t.id=e.getId(t.title)}),e.astroidsocialprofiles=AstroidSocialProfiles,e.profiles=AstroidSocialProfilesSelected,e.addProfile=function(){var t=e.astroidsocialprofiles;t.push({title:"",icon:"",link:"",id:e.getId()}),e.astroidsocialprofiles=t},e.selectSocialProfile=function(t){var o=e.profiles;o.push(angular.copy(t)),e.profiles=o},e.removeSocialProfile=function(t){if(confirm("Are you sure?")){var o=e.profiles;o.splice(t,1),e.profiles=o}},e.refreshScroll=function(t,o){o.enabled=$("#"+t).is(":checked");try{e.setProfiles(),Admin.refreshScroll()}catch(e){}},e.setProfiles=function(){var t=[];e.astroidsocialprofiles.forEach(function(e){e.enabled&&t.push(e)}),e.profiles=t},e.addCustomProfile=function(){var t=e.profiles;t.push(angular.copy({color:"#495057",enabled:!1,icon:"",icons:[],id:"custom",link:"#",title:"Custom social profile"})),e.profiles=t}}}}]),astroidFramework.directive("astroidsassoverrides",["$http",function(){return{restrict:"A",scope:!0,link:function(e,t,o){e.overrides=AstroidSassOverrideVariables,e.addOverride=function(){var t=e.overrides;t.push({variable:"",value:"",color:!0}),e.overrides=t,setTimeout(function(){$(".sass-variable-"+(t.length-1)+"-value").spectrum(spectrumConfig)},50)},e.removeOverride=function(t){if(confirm("Are you sure?")){var o=e.overrides;o.splice(t,1),e.overrides=o}},e.initSassColorPicker=function(e,t){t?$(".sass-variable-"+e+"-value").spectrum(spectrumConfig):$(".sass-variable-"+e+"-value").spectrum("destroy")},setTimeout(function(){e.overrides.forEach(function(e,t){void 0!==e.color&&1==e.color?$(".sass-variable-"+t+"-value").spectrum(spectrumConfig):e.color=!1})},500)}}}]),astroidFramework.directive("dropzone",function(){return{restrict:"A",link:function(e,t,o){var i=$(t).data("dropzone-id"),n=$(t).data("dropzone-dir"),r=$(t).data("media");$(t).dropzone({url:"index.php?option=com_ajax&astroid=media&action=upload&media="+r,clickable:!0,success:function(t,o){"success"==o.status?e.getLibrary(o.data.folder,"astroid-media-tab-library-"+i):Admin.notify(o.message,"error");try{Admin.refreshScroll()}catch(e){}},complete:function(e){this.removeAllFiles(!0);try{Admin.refreshScroll()}catch(e){}},sending:function(e,t,o){n?o.append("dir",$("#dropzone_folder_"+i).val()):o.append("dir","")}})}}}),astroidFramework.directive("rangeSlider",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){setTimeout(function(){i.$setViewValue(parseFloat($(t).data("slider-value"))),e.$apply()},50),setTimeout(function(){$(t).slider(rangeConfig)},100),setTimeout(function(){var n=$(t).data("prefix"),r=$(t).data("postfix");$(t).on("slide",function(e){$(t).siblings(".range-slider-value").text(n+e.value+r)}),$(t).siblings(".range-slider-value").text(n+$(t).val()+r);e.$watch(o.ngModel,function(){$(t).slider("setValue",i.$modelValue)})},200)}}}),astroidFramework.directive("colorPicker",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;if(n(t).hasClass("color-picker-lg")){var r=angular.copy(spectrumConfig);r.replacerClassName="color-picker-lg",n(t).spectrum(r)}else n(t).spectrum(spectrumConfig);n(t).on("move.spectrum",function(e,o){n(t).spectrum("set",o.toRgbString())});var a=function(){n(t).spectrum("set",i.$modelValue)};setTimeout(function(){var i=n(t).val();n(t).spectrum("set",i),e.$watch(o.ngModel,a)},200)}}}),astroidFramework.directive("colorSelector",function(e){return{restrict:"A",link:function(e,t,o,i){if(void 0===n)var n=jQuery;n(t).spectrum(spectrumConfig),n(t).on("move.spectrum",function(e,o){n(t).spectrum("set",o.toRgbString()).trigger("change")})}}}),astroidFramework.directive("animationSelector",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){setTimeout(function(){$(t).addClass("astroid-animation-selector"),$(t).astroidAnimationSelector()},100)}}}),astroidFramework.directive("selectUi",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;n(t).val();setTimeout(function(){var e=n(t).data("placeholder");e=void 0!==e&&e,n(t).addClass("astroid-select-ui search selection").dropdown({placeholder:e,fullTextSearch:!0})},200)}}}),astroidFramework.directive("selectUiAddable",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;setTimeout(function(){var e=n(t).data("placeholder");e=void 0!==e&&e,n(t).addClass("astroid-select-ui search selection").dropdown({placeholder:e,fullTextSearch:!0})},200)}}}),astroidFramework.directive("selectUiDiv",function(){return{restrict:"A",link:function(e,t,o,i){if(void 0===n)var n=jQuery;setTimeout(function(){n(t).dropdown({placeholder:!1,fullTextSearch:!0})},200)}}}),astroidFramework.directive("astroidSwitch",function(){return{restrict:"A",transclude:!0,replace:!1,require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;var r=i;e.$watch(o.ngModel,function(){1==r.$viewValue?(t.siblings(".custom-toggle").children(".custom-control-input").prop("checked",!0),t.val(1)):(t.siblings(".custom-toggle").children(".custom-control-input").prop("checked",!1),t.val(0))});var a=t.attr("id");t.attr("id",""),t.wrap("<div/>");var s=t.parent("div");n(s).append('<div class="custom-control custom-toggle"><input type="checkbox" id="'+a+'" class="custom-control-input" /><label class="custom-control-label" for="'+a+'"></label></div>'),n(s).find(".custom-control-input").bind("change",function(t){!function(t){t&&1!=r.$viewValue?(r.$setViewValue(1),e.$apply()):t||0==r.$viewValue?0!=r.$viewValue&&1!=r.$viewValue&&r.$setViewValue(0):(r.$setViewValue(0),e.$apply());try{Admin.refreshScroll()}catch(e){}}(n(this).is(":checked"))}),setTimeout(function(){1==t.val()?(t.siblings(".custom-toggle").children(".custom-control-input").prop("checked",!0),r.$setViewValue(1)):(t.siblings(".custom-toggle").children(".custom-control-input").prop("checked",!1),r.$setViewValue(0))},250)}}}),astroidFramework.directive("draggable",function(){return{restrict:"A",link:function(e,t,o){if(void 0===i)var i=jQuery;i(t).draggable({revert:"invalid",helper:"clone",cursor:"move"})}}}),astroidFramework.directive("astroidDatetimepicker",function(){return{restrict:"A",link:function(e,t,o){if(void 0===i)var i=jQuery;i(t).datetimepicker({icons:{time:"far fa-clock",date:"far fa-calendar-alt",up:"fa fa-angle-up",down:"fa fa-angle-down",next:"fa fa-angle-right",previous:"fa fa-angle-left",today:"fa fa-bullseye",clear:"far fa-trash-alt",close:"fa fa-times"},format:"MMMM Do YYYY, h:mm a",timeZone:TIMEZONE})}}}),astroidFramework.directive("droppable",function(){return{restrict:"A",link:function(e,t,o){if(void 0===i)var i=jQuery;i(t).droppable({classes:{"ui-droppable-active":"has-module","ui-droppable-hover":"hovered"},drop:function(t,o){var n=i(o.draggable).data("module-id"),r=i(o.draggable).data("module-title"),a=i(o.draggable).data("module-name"),s=i(this).data("col"),l=i(this).data("row");e.rows[l].cols[s].module.id=n,e.rows[l].cols[s].module.title=r,e.rows[l].cols[s].module.name=a,e.$apply()}})}}}),astroidFramework.directive("popover",function(){return{restrict:"A",link:function(e,t,o){if(void 0===i)var i=jQuery;setTimeout(function(){i(t).popover()},100)}}}),astroidFramework.directive("convertToNumber",function(){return{require:"ngModel",link:function(e,t,o,i){i.$parsers.push(function(e){return null!=e?parseInt(e,10):null}),i.$formatters.push(function(e){return null!=e?""+e:null})}}}),astroidFramework.directive("convertToString",function(){return{require:"ngModel",link:function(e,t,o,i){i.$parsers.push(function(e){return null!=e?e+"":null}),i.$formatters.push(function(e){return null!=e?""+e:null})}}}),astroidFramework.directive("astroidresponsive",["$http",function(e){return{restrict:"A",scope:!0,require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;n(t).parent(".astroidresponsive").append(n("#column-responsive-field-template").html());var r=!1,a=function(){if(!r){if(r=!0,void 0!==i.$modelValue)try{var o=JSON.parse(i.$modelValue)}catch(e){o=[]}else o=[];o.forEach(function(e){var o=n(t).parent(".astroidresponsive").find('.responsive-field[data-name="'+e.name+'"]');o.hasClass("jd-switch")?e.value?o.prop("checked",!0):o.prop("checked",!1):o.val(e.value)}),setTimeout(function(){n(t).parent(".astroidresponsive").find(".responsive-field").bind("change",function(){var o=[];n(".responsive-field").each(function(){var e={};e.name=n(this).data("name"),n(this).hasClass("jd-switch")?e.value=n(this).is(":checked")?1:0:e.value=n(this).val(),o.push(e)}),o=JSON.stringify(o),i.$setViewValue(o),n(t).val(o),e.$apply()})},50)}};setTimeout(function(){a()},100)}}}]),astroidFramework.directive("astroidgradient",["$http",function(e){return{restrict:"A",scope:!0,require:"ngModel",link:function(e,t,o,i){if(void 0===n)var n=jQuery;var r=n(t).parent(".astroid-gradient"),a=n(r).find(".gradient-type"),s=n(r).find(".start-color"),l=n(r).find(".stop-color"),c=n(r).find(".gradient-preview"),d=function(){var o=s.val(),r=l.val(),d="linear";if(a.each(function(){n(this).is(":checked")&&(d=n(this).val())}),"radial"==d)var u="radial-gradient("+o+", "+r+")";else u="linear-gradient(to bottom, "+o+" 0%, "+r+" 100%)";c.css("background-image",u);var p={type:"linear",start:"transparent",stop:"transparent"};p.type=d,p.start=o,p.stop=r,p=JSON.stringify(p),i.$setViewValue(p),n(t).val(p),e.$apply()};a.bind("change",d),s.bind("change",d),l.bind("change",d);var u=!1;setTimeout(function(){!function(){if(!u){if(u=!0,void 0!==i.$modelValue)try{var e=JSON.parse(i.$modelValue)}catch(t){e={type:"linear",start:"transparent",stop:"transparent"}}else e={type:"linear",start:"transparent",stop:"transparent"};n(r).find(".gradient-type[value="+e.type+"]").prop("checked",!0),s.spectrum("set",e.start),l.spectrum("set",e.stop),d()}}()},100)}}}]),String.prototype.shuffle=function(){for(var e=this.split(""),t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[o],e[o]=i}return e.join("")};var AstroidElement=function e(t,o){_classCallCheck(this,e),this.id=generateID(),this.type=t,this.params=[{name:"title",value:o}],this.refreshID=function(){this.id=generateID()}},AstroidSection=function e(t,o){_classCallCheck(this,e),this.id=generateID(),this.type=t,this.rows=[],this.params=[{name:"title",value:o}],this.refreshID=function(){this.id=generateID()}},AstroidRegularSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"regular-section","Astroid Section"))}return _inherits(t,AstroidSection),t}(),AstroidFullWidthSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ful-width","Full Width"))}return _inherits(t,AstroidSection),t}(),AstroidSpecialSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"special","Special Section"))}return _inherits(t,AstroidSection),t}(),AstroidRow=function e(){_classCallCheck(this,e),this.id=generateID(),this.cols=[]},AstroidColumn=function e(){_classCallCheck(this,e),this.id=generateID(),this.elements=[],this.size=12,this.type="column",this.params=[{name:"title",value:""}]};function uploadLayoutJSON(){var e=document.getElementById("astroid-layout-import");if(e)if(e.files)if(e.files[0]){var t=e.files[0],o=new FileReader;o.addEventListener("load",function(){var e=checkUploadedJSON(o.result);if(!1!==e){var t=angular.element(document.getElementById("layoutController")).scope();t.layout=e,t.$apply()}},!1),t&&o.readAsText(t)}else;else;else;$("#astroid-layout-import").val("")}function checkUploadedJSON(e){if(!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return Admin.notify("Invalid JSON"),!1;var t=JSON.parse(e);return""==t||null==t||void 0===t.sections?(Admin.notify("Invalid Layout file"),!1):t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}astroidFramework.controller("layoutController",function(e,t){e.grids=ASTROID_GRIDS,e.elements=AstroidLayoutBuilderElements,e.sections=[],e.sections.push(AstroidRegularSection),e.chooseRow={open:0,section:null},e.chooseRowColumns={open:0,row:null,section:null},e.chooseElement={open:0,column:null,row:null,section:null},e.chooseSection={open:0,section:null},e.savingSection={open:0,section:null},e.editingElement={open:0,element:null,template:""},e.editSectionTitle={title:"",editing:!1},e.layout=_layout,e.save=function(){console.log(e.layout)},e.focusEditTitle=function(t,o){e.editSectionTitle.editing=!0,e.editSectionTitle.title=e.getParam(o,"title"),setTimeout(function(){$(t.currentTarget).siblings("input").focus()},50)},e.layoutHistory=[],e.historyIndex=-1,e.backIndex=-1,e.getObject=function(e){return new e},e.addingSection=function(t){e.chooseSection={open:1,section:t}},e.addSection=function(t){var o=e.layout.sections,i=new AstroidSection("section","Astroid Section"),n=new AstroidColumn;n.size=12;var r=new AstroidRow;r.cols.push(n),i.rows.push(r);var a=0;null==t?(o.push(i),a=o.length-1):(o.splice(t+1,0,i),a=t+1),e.layout.sections=o,e.chooseSection={open:0,section:null},e.editRow(0,a),e.actionPreformed()},e.duplicateSection=function(t){var o=angular.copy(e.layout.sections[t]);refreshID(o=e.checkBeforeDuplicate("section",o),"section");var i=e.layout.sections;i.splice(t+1,0,o),e.layout.sections=i,e.actionPreformed()},e.addToLibrarySection=function(t){console.log(t),console.log("Added to library"),e.savingSection={open:0,section:null}},e.removeSection=function(t){if(confirm("Are you sure?")){var o=e.layout.sections;o.splice(t,1),e.layout.sections=o,e.actionPreformed()}},e.updateSectionTitle=function(t){""==e.editSectionTitle.title&&(e.editSectionTitle.title="Astroid Section"),e.setParam(t,"title",e.editSectionTitle.title),e.editSectionTitle.editing=!1,e.editSectionTitle.title=""},e.editRow=function(t,o){e.chooseRowColumns={open:1,row:t,section:o}},e.updateRow=function(t,o,i){if("custom"==i&&!1===(i=e.getCustomGrid()))return!1;var n=e.layout.sections[o].rows[t].cols,r=[];i.length<n.length?n.forEach(function(e,t){if(void 0!==i[t])e.size=i[t],r.push(e);else{var o=r[i.length-1].elements;e.elements.forEach(function(e){o.push(e)}),r[i.length-1].elements=o}}):i.forEach(function(e,t){if(void 0!==n[t]){var o=n[t];o.size=e,r.push(o)}else{var i=new AstroidColumn;i.size=e,r.push(i)}}),e.layout.sections[o].rows[t].cols=r,e.chooseRowColumns={open:0,row:null,section:null},e.actionPreformed()},e.getCustomGrid=function(){var t=prompt("Please enter custom grid size (eg. 2+3+6+1)","");return null!=t&&(t=t.split("+"),e.isValidGrid(t)?t:(alert("Invalid grid size."),!1))},e.isValidGrid=function(e){var t=0;return e.forEach(function(e){t+=parseInt(e)}),12==t},e.duplicateRow=function(t,o){var i=angular.copy(e.layout.sections[o].rows[t]);refreshID(i=e.checkBeforeDuplicate("row",i),"row");var n=e.layout.sections[o].rows;n.splice(t+1,0,i),e.layout.sections[o].rows=n,e.actionPreformed()},e.addingRow=function(t){e.chooseRow={open:1,section:t}},e.addRow=function(t,o){if("custom"==o&&!1===(o=e.getCustomGrid()))return!1;var i=e.layout.sections[t],n=new AstroidRow;o.forEach(function(e){var t=new AstroidColumn;t.size=e,n.cols.push(t)}),i.rows.push(n),e.layout.sections[t]=i,e.chooseRow.open=0,e.chooseRow.section=null,e.actionPreformed()},e.removeRow=function(t,o){if(confirm("Are you sure?")){var i=e.layout.sections[o].rows;i.splice(t,1),e.layout.sections[o].rows=i,e.actionPreformed()}},e.setColumn=function(e){void 0===e.type&&(e.type="column")},e.addingElement=function(t,o,i,n){e.chooseElement={open:1,column:t,row:o,section:i,element:n}},e.addElement=function(t,o,i,n,r){r=new AstroidElement(r.type,r.title);var a=e.layout.sections[i].rows[o].cols[t].elements;null==n?a.push(r):a.splice(n+1,0,r),e.layout.sections[i].rows[o].cols[t].elements=a,e.chooseElement={open:0,column:null,row:null,section:null,element:null},e.actionPreformed(),e.editElement(r)},e.removeElement=function(t,o,i,n){if(confirm("Are you sure?")){var r=e.layout.sections[n].rows[i].cols[o].elements;r.splice(t,1),e.layout.sections[n].rows[i].cols[o].elements=r,e.actionPreformed()}},e.getParam=function(e,t){var o="";return e.params.forEach(function(e){if(e.name==t)return o=e.value,!1}),o},e.setParam=function(e,t,o){return e.params.forEach(function(e){if(e.name==t)return e.value=o,!1}),!0},e.elementParams={},e.editElement=function(o,i){Admin.ringLoading($("#element-settings").children(".ezlb-pop-body"),!0);var n=$("#element-form-template-"+o.type).html();e.elementParams={};var r={};angular.element(document.getElementById("element-settings-form")).html(t(n)(e,function(){$("#element-settings").addClass("open");var t={};void 0!==o.params&&o.params.forEach(function(e){t[e.name]=e.value}),r=angular.copy(t),e.elementParams=t,setTimeout(function(){var t=!1;$.each(r,function(o,i){var n=$("#element-settings-form").find('[name="'+o+'"]');n.length&&"radio"==n.attr("type")&&(e.elementParams[o]=i,t=!0)}),t&&e.$apply(),Admin.ringLoading($("#element-settings").children(".ezlb-pop-body"),!1),void 0!==i&&$("#element-settings").find("#"+i).focus(),Admin.initPop()},500)})),$("#element-form-"+o.type).submit(function(i){i.preventDefault(i);var n=$(this).serializeArray();return o.params=n,e.elementParams={},$("#element-settings-save").unbind(),$("#element-form-"+o.type).unbind(),angular.element(document.getElementById("element-settings-form")).html(t("")(e)),$("#element-settings").removeClass("open"),e.$apply(),!1}),$("#element-settings-save").bind("click",function(){$("#element-form-"+o.type).submit()}),$("#element-settings-close").click(function(){$("#element-settings-save").unbind(),$("#element-form-"+o.type).unbind(),e.elementParams={},angular.element(document.getElementById("element-settings-form")).html(t("")(e)),e.$apply(),$("#element-settings").removeClass("open")})},e.saveElement=function(e){$("#"+e).serialize()},e.getElementByType=function(t){var o={};return e.elements.forEach(function(e){e.type==t&&(o=e)}),o},e.duplicateElement=function(t,o,i,n){var r=angular.copy(e.layout.sections[n].rows[i].cols[o].elements[t]);refreshID(r,"element");var a=e.layout.sections[n].rows[i].cols[o].elements;a.splice(t+1,0,r),e.layout.sections[n].rows[i].cols[o].elements=a,e.actionPreformed()},e.checkBeforeDuplicate=function(t,o){switch(t){case"section":return o.rows.forEach(function(t){t=e.checkBeforeDuplicate("row",t)}),o;case"row":return o.cols.forEach(function(t){t=e.checkBeforeDuplicate("column",t)}),o;case"column":var i=[];return o.elements.forEach(function(t){e.checkBeforeDuplicate("element",t)&&i.push(t)}),o.elements=i,o;case"element":return e.canAddElement(e.getElementByType(o.type))}},e.actionPreformed=function(){e.saveHistory(),setTimeout(function(){Admin.refreshScroll()},200)},e.saveHistory=function(){var t=e.layoutHistory;t.push({date:new Date,layout:angular.copy(e.layout)}),e.layoutHistory=t,e.historyIndex=e.historyIndex+1,e.backIndex=e.backIndex+1},e.saveHistory(),e.setFormData=function(e,t){$.each(t,function(){var t=this.name,o=this.value,i=$('[name="'+t+'"]',e);switch(i.prop("type")){case"radio":case"checkbox":i.each(function(){$(this).attr("value")==o&&$(this).attr("checked",o)});break;default:i.val(o)}i.change()})},e.canAddElement=function(t){return!!t.multiple||!e.hasElement(t.type)},e.hasElement=function(t){var o=!1;return e.layout.sections.forEach(function(e){if(o)return!1;e.rows.forEach(function(e){if(o)return!1;e.cols.forEach(function(e){if(o)return!1;e.elements.forEach(function(e){return!o&&(e.type==t?(o=!0,!1):void 0)})})})}),o},e.back=function(){},e.forward=function(){},e.exportLayout=function(){var t=angular.copy(e.layout),o=JSON.stringify(t),i="data:application/json;charset=utf-8,"+encodeURIComponent(o),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download","astroid-layout.json"),n.click()},e.importLayout=function(){$("#astroid-layout-import").click()}}),function(e){e(function(){e(".compress").click(function(){e(this).parent(".ezlb-pop-header").parent(".ezlb-pop-body").addClass("left-push")}),e(".expand").click(function(){e(this).parent(".ezlb-pop-header").parent(".ezlb-pop-body").removeClass("left-push")}),e(document).bind("keydown","ctrl+z",function(){angular.element(document.getElementById("layoutController")).scope().back()}),e(document).bind("keydown","meta+z",function(){angular.element(document.getElementById("layoutController")).scope().back()}),e(document).bind("keydown","ctrl+y",function(){angular.element(document.getElementById("layoutController")).scope().forward()}),e(document).bind("keydown","meta+y",function(){angular.element(document.getElementById("layoutController")).scope().forward()})})}(jQuery);var spectrumConfig={flat:!!$(void 0).data("flat"),showInput:!0,showInitial:!1,allowEmpty:!0,showAlpha:!0,disabled:!1,showPalette:!0,showPaletteOnly:!1,showSelectionPalette:!0,showButtons:!1,preferredFormat:"rgb",localStorageKey:"astroid.colors",palette:[["#fff","#f8f9fa","#dee2e6","#adb5bd","#495057","#343a40","#212529","#000"],["#007bff","#8445f7","#ff4169","#c4183c","#fb7906","#ffb400","#17c671","#00b8d8"]],change:function(e){}},dropdownConfig={placeholder:!1,fullTextSearch:!0},rangeConfig={},presetProps=["preloader_color","preloader_bgcolor","backtotop_icon_color","backtotop_icon_bgcolor","body_background_color","body_text_color","body_link_color","body_link_hover_color","header_bg","header_text_color","header_logo_text_color","header_logo_text_tagline_color","stick_header_bg_color","stick_header_menu_link_color","stick_header_menu_link_active_color","stick_header_menu_link_hover_color","main_menu_link_color","main_menu_link_active_color","main_menu_link_hover_color","dropdown_bg_color","dropdown_link_color","dropdown_menu_active_link_color","dropdown_menu_active_bg_color","dropdown_menu_link_hover_color","dropdown_menu_hover_bg_color","mobile_backgroundcolor","mobile_menu_text_color","mobile_menu_link_color","mobile_menu_active_link_color","mobile_menu_active_bg_color","h1_typography_options.font_color","h2_typography_options.font_color","h3_typography_options.font_color","h4_typography_options.font_color","h5_typography_options.font_color","h6_typography_options.font_color","icon_color","background_color","img_background_color","background_color_404","img_background_color_404","theme_blue","theme_indigo","theme_purple","theme_pink","theme_red","theme_orange","theme_yellow","theme_green","theme_teal","theme_cyan","theme_white","theme_gray100","theme_gray600","theme_gray800"];!function(e){e.fn.astroidAnimationSelector=function(t){var o=e.extend({actor:".animation-actor",createActor:!0},t);return this.each(function(){var t=e(this),i=!1;if(o.createActor){t.after('<span title="Animate it" class="animation-actor"><span>').append("<span><span>");var n=t.next(".animation-actor")}t.addClass("search selection"),t.dropdown({placeholder:!1,fullTextSearch:!0,onChange:function(e,t,o){clearTimeout(i),n.children("span").removeClass();var r=e;r=r.replace("string:",""),n.children("span").removeClass().addClass("animated").addClass(r),i=setTimeout(function(){n.children("span").removeClass()},1500)}}),n.bind("click",function(){clearTimeout(i),n.children("span").removeClass();var e=t.val();e=e.replace("string:",""),n.children("span").removeClass().addClass("animated").addClass(e),i=setTimeout(function(){n.children("span").removeClass()},1500)})})}}(jQuery);var AstroidForm=function e(t){_classCallCheck(this,e),this.form=$(t),this.init=function(){},this.reload=function(){}},AstroidContentLayout=function e(){_classCallCheck(this,e),this.positions=$("[data-astroid-content-layout]"),this.loads=$("[data-astroid-content-layout-load]"),this.input=$(".astroidcontentlayouts"),this.layouts=[],this.save=function(){var e=[];this.layouts.forEach(function(t){e.push(t.join(":"))}),this.input.val(e.join(","))},this.refresh=function(){var e=[];this.positions.each(function(){var t=$(this),o=t.data("astroid-content-layout"),i=t.data("fieldname"),n=$('[data-astroid-content-layout-load="'+i+'"]').val();n=void 0===n||""==n||null==n||"after"!=n&&"before"!=n?"after":n,""!=o&&""!=t.val()&&e.push([o,t.val(),n])}),this.layouts=e,this.save()},this.init=function(){var e=this;e.refresh(),e.loads.change(function(){e.refresh()}),e.positions.change(function(){e.refresh()})}},AstroidAdmin=function e(){_classCallCheck(this,e),this.saved=!0,this.notify=function(e,t){$.notify(e,{className:t,globalPosition:"bottom right"})},this.ringLoading=function(e,t){t?$(e).children(".astroid-ring-loading").show():$(e).children(".astroid-ring-loading").hide()},this.initSidebar=function(){var e=this;$('.sidebar-nav > li > a[data-toggle="tab"]').on("shown.bs.tab",function(t){$("body").removeClass("show-options"),$("body").hasClass("astroid-live-preview")&&e.refreshPreviewScrolls(),"#astroid-tab-astroid_layout"==$(t.target).attr("data-target")?$("body").addClass("astroid-layout-tab-selected"):$("body").removeClass("astroid-layout-tab-selected"),$.cookie("astroid-default-tab",$(t.target).attr("data-target")),$(".sidebar-submenu").slideUp(500),$(t.target).siblings(".sidebar-submenu").slideDown(500),setTimeout(function(){$("body, html").animate({scrollTop:0},0),$("body").hasClass("astroid-live-preview")||e.refreshScroll()},510),$("body, html").animate({scrollTop:2},0)})},this.initTabs=function(){$(".hash-link").click(function(e){e.preventDefault();var t=$(this).attr("href");$("body, html").animate({scrollTop:$(t).offset().top-68},100),setTimeout(function(){$(window).trigger("scroll")},110)})},this.initPop=function(){$(".compress").click(function(){$(this).parent(".ezlb-pop-header").parent(".ezlb-pop-body").addClass("left-push"),$(this).parent(".ezlb-pop-header").parent("div").parent(".ezlb-pop-body").addClass("left-push")}),$(".expand").click(function(){$(this).parent(".ezlb-pop-header").parent(".ezlb-pop-body").removeClass("left-push"),$(this).parent(".ezlb-pop-header").parent("div").parent(".ezlb-pop-body").removeClass("left-push")}),$(".ezlb-pop-header .nav-tabs li a").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||Admin.ringLoading($("#element-settings").children(".ezlb-pop-body"),!0)}),$(".ezlb-pop-header .nav-tabs li a").on("shown.bs.tab",function(e){e.preventDefault(),setTimeout(function(){Admin.ringLoading($("#element-settings").children(".ezlb-pop-body"),!1)},100)})},this.initScroll=function(){$("#astroid-sidebar-wrapper").niceScroll({autohidemode:"leave",cursoropacitymin:.4,background:"rgba(255,255,255,0.5)",cursorcolor:"#4A5768",cursorwidth:"7px",cursorborderradius:0,cursorborder:"none"}),$("body").niceScroll({autohidemode:"leave",cursoropacitymin:.4,background:"rgba(255,255,255,0.5)",cursorcolor:"#4A5768",cursorwidth:"7px",cursorborderradius:0,cursorborder:"none"})},this.initScrollSpy=function(){$("body").scrollspy({target:"#astroid-menu",offset:101})},this.refreshScroll=function(){setTimeout(function(){$("#astroid-sidebar-wrapper").getNiceScroll().resize(),$("body").getNiceScroll().resize()},300)},this.livePreview=function(){$("body").addClass("astroid-live-preview"),$("body").addClass("show-options"),setTimeout(function(){Admin.livePreviewScrolls()},220),Admin.hideAllTabs()},this.reloadPreview=function(){if($("body").hasClass("astroid-live-preview")){var e=document.getElementById("live-preview");e.src=e.src+"?ts="+generateID()}},this.hideAllTabs=function(){$("#astroid-menu li a").removeClass("active"),$("#astroid-menu li a").removeClass("show"),$("#astroid-menu li a").prop("aria-selected",!1)},this.closeLivePreview=function(){$("body").removeClass("astroid-live-preview"),$("body").removeClass("show-options"),setTimeout(function(){$("#astroid-content-wrapper").getNiceScroll().remove(),Admin.refreshScroll()},220)},this.livePreviewScrolls=function(){$("#astroid-content-wrapper").niceScroll({autohidemode:"leave",cursoropacitymin:.4,background:"rgba(243,243,243,1)",cursorcolor:"#4A5768",cursorwidth:"7px",cursorborderradius:0,cursorborder:"none"}),Admin.refreshPreviewScrolls()},this.setPreviewViewport=function(e,t){$("#live-preview-viewport").removeClass().addClass(e),$(".viewport-options").find("a").removeClass("active"),$(t).addClass("active")},this.refreshPreviewScrolls=function(){setTimeout(function(){$("#astroid-content-wrapper").getNiceScroll().resize(),$("#astroid-sidebar-wrapper").getNiceScroll().resize()},50)},this.showOptions=function(){$("body").addClass("show-options"),$("body").removeClass("astroid-layout-tab-selected"),Admin.refreshPreviewScrolls(),Admin.hideAllTabs()},this.initForm=function(){$("#astroid-form").parsley({focus:"last"}).on("field:error",function(){var e=$(this.$element).parent("div").data("fieldset");$('[data-target="#'+e+'"]').tab("show")}).on("form:submit",function(){var e=$("#astroid-form").serializeArray(),t=parseInt($("#export-form").val());return $("#astroid-manager-disabled").show(),t||($("#save-options").addClass("d-none"),$("#saving-options").removeClass("d-none")),$("#save-options").prop("disabled",!0),$("#export-options").prop("disabled",!0),$("#export-preset").prop("disabled",!0),$("#import-options").prop("disabled",!0),$("#save-options").addClass("disabled"),$("#export-options").addClass("disabled"),$("#export-preset").addClass("disabled"),$("#import-options").addClass("disabled"),$.ajax({method:"POST",url:$("#astroid-form").attr("action"),data:e,dataType:"json",success:function(e){if($("#astroid-manager-disabled").hide(),$("#save-options").removeClass("d-none"),$("#saving-options").addClass("d-none"),$("#save-options").prop("disabled",!1),$("#export-options").prop("disabled",!1),$("#export-preset").prop("disabled",!1),$("#import-options").prop("disabled",!1),$("#save-options").removeClass("disabled"),$("#export-options").removeClass("disabled"),$("#export-preset").removeClass("disabled"),$("#import-options").removeClass("disabled"),$("#export-form").val(0),"error"==e.status)return Admin.notify(e.message,"error"),!1;Admin.saved=!0,Admin.reloadPreview(),t?Admin.exportSettings(e.data):Admin.notify("Template Saved.","success")}}),!1}),$("#save-options").click(function(){return $("#astroid-form").submit(),!1}),$("#export-options").click(function(){return $("#export-form").val(1),$("#astroid-form").submit(),!1}),$("#import-options").click(function(){return $("#astroid-settings-import").click(),!1}),$("#astroid-settings-import").on("change",function(){var e=document.getElementById("astroid-settings-import");if(e)if(e.files)if(e.files[0]){var t=e.files[0],o=new FileReader;o.addEventListener("load",function(){var e=Admin.checkUploadedSettings(o.result);!1!==e&&Admin.saveImportedSettings(e)},!1),t&&o.readAsText(t)}else;else;else;$("#astroid-settings-import").val("")})},this.saveImportedSettings=function(e){$("#astroid-manager-disabled").show(),$("#save-options").addClass("d-none"),$("#saving-options").removeClass("d-none"),$("#save-options").prop("disabled",!0),$("#export-options").prop("disabled",!0),$("#export-preset").prop("disabled",!0),$("#import-options").prop("disabled",!0),$("#save-options").addClass("disabled"),$("#export-options").addClass("disabled"),$("#export-preset").addClass("disabled"),$("#import-options").addClass("disabled");var t={params:e};t[$("#astroid-admin-token").val()]=1,$.ajax({method:"POST",url:$("#astroid-form").attr("action"),data:t,dataType:"json",success:function(e){"error"==e.status?Admin.notify(e.message,"error"):(Admin.saved=!0,Admin.reloadPreview(),Admin.notify("Settings Imported.","success")),setTimeout(function(){window.location=window.location},1e3)}})},this.checkUploadedSettings=function(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?JSON.parse(e):(Admin.notify("Invalid JSON"),!1)},this.exportSettings=function(e){var t=JSON.stringify(e),o="data:text/json;charset=utf-8,"+encodeURIComponent(t),i=new Date,n=i.getFullYear(),r=i.getMonth()+1,a=i.getDate(),s=i.getHours(),l=i.getMinutes(),c=i.getSeconds(),d=prompt("Please enter your desired name","astroid-zero-template");if(""===d)return Admin.notify("Can't be empty","error"),!1;if(d){if(!/^[0-9a-zA-Z].*/.test(d)||/\s/.test(d))return Admin.notify("Invalid","error"),!1;var u=d+" "+n+"-"+r+"-"+a+" "+s+":"+l+":"+c+".json"}$("#export-link").attr("href",o),$("#export-link").attr("download",u),$("#export-link")[0].click()},this.watchForm=function(){var e=this;$("form#astroid-form :input").change(function(){e.saved=!1;try{Admin.refreshScroll()}catch(e){}})},this.initClearCache=function(){var e=this;$("#clear-cache").click(function(){return $("#clear-cache").addClass("d-none"),$("#clearing-cache").removeClass("d-none"),$.ajax({method:"GET",dataType:"json",url:BASE_URL+"index.php?option=com_ajax&astroid=clear-cache&template="+TEMPLATE_NAME,success:function(t){$("#clear-cache").removeClass("d-none"),$("#clearing-cache").addClass("d-none"),e.notify(t.message,t.status)}}),!1})},this.initSelect=function(){$(".astroid-select-ui").addClass("search selection").dropdown({placeholder:!1,fullTextSearch:!0})},this.initSelectGrouping=function(){$(".ui.dropdown").has("optgroup").each(function(){var e=$("<div/>").addClass("menu");return $(this).find("optgroup").each(function(){return e.append('<div class="header">'+this.label+'</div><div class="divider"></div>'),$(this).children().each(function(){return e.append('<div class="item" data-value="'+this.value+'">'+this.innerHTML+"</div>")})}),$(this).find(".menu").html(e.html())})},this.initAnimationSelector=function(){$(".astroid-animation-selector").astroidAnimationSelector()},this.initColorPicker=function(){$(".astroid-color-picker").each(function(){if($(this).hasClass("color-picker-lg")){var e=spectrumConfig;e.replacerClassName="color-picker-lg",$(this).spectrum(e)}else $(this).spectrum(spectrumConfig)})},this.initCodeArea=function(){$("[data-code]").each(function(){var e=$(this).attr("id"),t=$(this);$(t).hide();var o=ace.edit(e+"_editor");o.session.setMode("ace/mode/"+t.data("code")),o.setOption("showPrintMargin",!1),o.getSession().setValue($(t).val()),o.getSession().on("change",function(){$(t).val(o.getSession().getValue())})})},this.slugify=function(e){var t="àáäâãåăæąçćčđďèéěėëêęğǵḧìíïîįłḿǹńňñòóöôœøṕŕřßşśšșťțùúüûǘůűūųẃẍÿýźžż·/_,:;",o=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(o,function(e){return"aaaaaaaaacccddeeeeeeegghiiiiilmnnnnooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))}).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},this.init=function(){this.initScroll(),this.initScrollSpy(),this.initSidebar(),this.initTabs(),this.initForm(),this.watchForm(),this.initClearCache(),this.initPop(),this.initSelect(),this.initSelectGrouping()},this.load=function(){var e=this,t=$.cookie("astroid-default-tab");"#astroid-tab-astroid_layout"==t?$("body").addClass("astroid-layout-tab-selected"):$("body").removeClass("astroid-layout-tab-selected"),void 0===t?$("#astroid-menu li:first-child a").tab("show"):0==$('#astroid-menu li a[data-target="'+t+'"]').length?$("#astroid-menu li:first-child a").tab("show"):$('#astroid-menu li a[data-target="'+t+'"]').tab("show"),setTimeout(function(){Admin.saved=!0},150),setTimeout(function(){e.loading(!1)},500),this.initCodeArea()},this.loading=function(e){void 0===e&&(e=!0),e?$(".astroid-loading").fadeIn(500):$(".astroid-loading").fadeOut(500)}},Admin=new AstroidAdmin;!function(e){var t=function(t,o,i){null!==i&&i.parent(".astroid-typography-preview-container").siblings(".library-font-warning").addClass("d-none");var n=!1;SYSTEM_FONTS.forEach(function(e){if(t==e)return n=!0,!1});var r=!1;if(LIBRARY_FONTS.forEach(function(e){if(t==e)return r=!0,!1}),r)return null!==i&&(i.css("font-family",t),i.parent(".astroid-typography-preview-container").siblings(".library-font-warning").removeClass("d-none")),!1;if(n)return null!==i&&i.css("font-family",t),!1;var a=t.split(":");a=(a=a[0]).replace(/\+/g," ");var s=t.replace(/\+/g,"-");if(s=(s=s.replace(/\:/g,"-")).replace(/\,/g,"-"),e("link#"+s).length)return null!==i&&i.css("font-family",a),!1;o.addClass("loading"),e("<link/>",{rel:"stylesheet",type:"text/css",id:s,href:"https://fonts.googleapis.com/css?family="+t}).appendTo("head"),e("link#"+s).bind("load",function(){setTimeout(function(){o.removeClass("loading"),null!==i&&i.css("font-family",a)},200)})},o=function(){e.ajax({method:"GET",url:BASE_URL+"index.php?option=com_ajax&astroid=google-fonts&template="+TEMPLATE_NAME,success:function(o){e(".astroid-font-selector").find(".menu").html(o),setTimeout(function(){e(".astroid-font-selector").each(function(){e(this).val(e(this).data("value"))}),e(".astroid-font-preview").find(".more").click(function(){var t=e(this).data("target");e("."+t).addClass("expand")}),e(".astroid-font-preview").find(".less").click(function(){var t=e(this).data("target");e("."+t).removeClass("expand")}),e(".astroid-font-selector").addClass("search selection").dropdown({placeholder:!1,fullTextSearch:!0,onChange:function(o,i,n){_dropdown=e(this);var r=_dropdown.data("preview");t(o,_dropdown,e("."+r))}}),e(".astroid-font-selector").each(function(){var o=e(this).children('[type="hidden"]'),i=e(this),n=o.val();if(""!=n&&void 0!==n){var r=i.data("preview");t(n,i,e("."+r))}})},100)}})},i=function(){Dropzone.autoDiscover=!1},n=function(){e(".unit-picker").children("li").children("label").children("input[type=radio]").change(function(){var t=e(this).data("sid");e('[data-slider-id="'+t+'"]').attr("data-unit",e(this).val()).trigger("change")})};!function(){Admin.init();astroid_shortcut_enable&&(e(document).on("keydown",function(t){var o=e("#element-settings-save");if((t.metaKey||t.ctrlKey)&&"s"===String.fromCharCode(t.which).toLowerCase())return o.length?(o.click(),setTimeout(function(){e("#astroid-form").submit()},100)):e("#astroid-form").submit(),!1}),e(document).on("keydown",function(t){if(0==e("input,textarea").is(":focus")&&46==t.keyCode)return e("#clear-cache").click(),!1}),e(document).on("keydown",function(t){var o=e("#element-settings-close");o.length&&27==t.keyCode&&o.click()}),e(document).on("keydown",function(t){if((t.metaKey||t.ctrlKey)&&"p"===String.fromCharCode(t.which).toLowerCase()){var o=e("#show-previews").attr("href");window.open(o)}}),e(document).on("keypress",function(t){t.shiftKey&&63==t.keyCode&&!e("textarea,input").is(":focus")&&e("#astroidUnderlay").addClass("helpshortcut-visible")}),e(document).on("click",".astroid-close",function(t){e("#astroidUnderlay").removeClass("helpshortcut-visible")}),document.onkeydown=function(t){27==t.keyCode&&e("#astroidUnderlay").removeClass("helpshortcut-visible")}),o(),i(),e(".astroid-code-editor-exit-fs").click(function(){e(this).parent(".head").parent(".astroid-code-editor").removeClass("full-screen"),setTimeout(function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},10)}),e(".astroid-code-editor-fs").click(function(){e(this).parent(".astroid-code-editor").addClass("full-screen"),setTimeout(function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},10)}),e(".astroid-preloader-field-select").click(function(){e(this).parent(".astroid-preloader-field").children(".astroid-preloaders-selector").addClass("open")}),e(".astroid-preloaders-selector-exit-fs").click(function(){e(this).parent(".head").parent(".astroid-preloaders-selector").removeClass("open")}),e(".astroid-preloader-select").click(function(){var t=e(this).data("value");e(this).parent("div").parent(".body").parent(".astroid-preloaders-selector").parent(".astroid-preloader-field").children('input[type="hidden"]').val(t),e(this).parent("div").parent(".body").parent(".astroid-preloaders-selector").parent(".astroid-preloader-field").children(".select-preloader").html(e(this).html()),e(this).parent("div").parent(".body").parent(".astroid-preloaders-selector").removeClass("open")}),n()}(),e(window).on("load",function(){e("[data-typography-field]").each(function(){var t=e(this),o=t.data("typography-field"),i=e(".astroid-typography-preview."+o+"-astroid-typography-preview"),n=t.data("typography-property"),r=t.data("unit");if("font-style"==n){if(e(this).is(":checked"))switch(a=e(this).val()){case"italic":i.css("font-style","italic");break;case"underline":i.css("text-decoration","underline"),i.children("*").css("text-decoration","underline")}else switch(a=e(this).val()){case"italic":i.css("font-style","normal");break;case"underline":i.css("text-decoration","none"),i.children("*").css("text-decoration","none")}t.change(function(){if(e(this).is(":checked"))switch(a=e(this).val()){case"italic":i.css("font-style","italic");break;case"underline":i.css("text-decoration","underline"),i.children("*").css("text-decoration","underline")}else switch(a=e(this).val()){case"italic":i.css("font-style","normal");break;case"underline":i.css("text-decoration","none"),i.children("*").css("text-decoration","none")}})}else if("color"==n){var a=t.val();i.css(n,a),t.change(function(){var e=t.val();i.css(n,e)})}else void 0===r&&(r=""),a=t.val(),i.css(n,a+r),t.change(function(){var o=e(this).attr("data-unit");void 0===o&&(o="");var r=t.val();i.css(n,r+o)})}),Admin.load()})}(jQuery),window.onbeforeunload=function(){if(!Admin.saved)return"Are you sure you want to leave before save?"};var ContentLayout=new AstroidContentLayout;ContentLayout.init();